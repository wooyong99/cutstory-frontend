# Additional Requirements — 예약 시간 설계 & 메뉴판

## 1. 목적

본 문서는 미용실 예약 서비스에서  
**시술별 소요 시간 차이를 고려한 예약 시간표 설계 방식**과  
**메뉴(가격표) 구조를 명확히 정의**하는 것을 목적으로 한다.

시간표 렌더링 단위와 예약 점유 단위를 분리하여  
UX 혼란을 방지하고, 구현 복잡도를 최소화한다.

---

## 2. 예약 시간 설계 정책 (Best Practice)

### 2.1 핵심 원칙

- 시간표 표시 단위는 **항상 고정된 최소 단위**를 사용한다.
- 시술별 소요 시간은 **연속 슬롯 점유 방식**으로 처리한다.
- 사용자는 **시작 시간만 선택**한다.
- 예약이 불가능한 시작 시간은 **미리 비활성화**하여 클릭 자체를 막는다.

> ❌ 시술마다 시간표 단위를 다르게 렌더링하지 않는다  
> ⭕ 시간표 단위는 고정, 예약 점유 시간만 다르게 계산한다

---

## 3. 시간 슬롯 기준

### 3.1 시간 단위

- 기본 시간 슬롯 단위: **30분**
- 모든 예약 시간표는 30분 단위로 렌더링한다.

예시:
10:00
10:30
11:00
11:30
12:00
...

---

### 3.2 시술 소요 시간 표현 방식

- 각 시술(헤어 스타일)은 `durationMinutes` 값을 가진다.
- 예약 가능 여부는 선택한 시작 시간 기준으로  
  **연속된 30분 슬롯이 충분한지**로 판단한다.

예시:

- 30분 → 1 슬롯
- 60분 → 2 슬롯
- 90분 → 3 슬롯
- 120분 → 4 슬롯

---

## 4. 예약 가능 여부 판단 규칙

### 4.1 시작 시간 클릭 규칙

- 사용자는 시작 시간만 클릭할 수 있다.
- 클릭 시 시스템은 내부적으로 다음을 계산한다:
  선택한 시작 시간 + 시술 소요 시간

- 해당 구간의 모든 슬롯이 비어있을 경우에만 예약 가능하다.

---

### 4.2 예약 불가 슬롯 처리

#### 1) 이미 예약된 슬롯

- 시각적으로 불투명(opacity)
- 클릭 불가(disabled)
- hover/active 효과 없음

#### 2) 연속 시간이 부족한 시작 슬롯

- 시작 슬롯 자체를 비활성화
- (선택) 툴팁/안내 문구:
  > “선택한 시술의 연속 시간이 부족합니다”

> ⚠️ 클릭 후 실패보다 **처음부터 클릭 불가 UX**를 우선한다.

---

## 5. 예약 UX 안내 문구 (필수)

시작 시간 선택 시 아래와 같은 안내를 제공한다:

예:

> “선택한 시술은 **2시간 소요**됩니다”  
> “예약 시간: **10:00 ~ 12:00**”

사용자는 시간을 계산할 필요가 없어야 한다.

---

## 6. 빈 상태 / 예외 UX

### 6.1 날짜에 예약 가능한 시간이 없는 경우

- 오류처럼 보이지 않는 빈 상태 UI 제공
- 예시 문구:
  - “이 날짜에는 예약 가능한 시간이 없습니다”
  - “다른 날짜를 선택해보세요”

---

### 6.2 동시 예약 충돌

- 사용자가 선택한 슬롯이 요청 시점에 예약된 경우:
  - 안내 메시지 표시
  - 해당 날짜의 시간 슬롯 데이터 재조회
  - UI 즉시 갱신

---

## 7. 메뉴판 (시술 목록) 정의

### 7.1 컷 (Cut)

| 메뉴         | 설명      | 가격     | 소요 시간 |
| ------------ | --------- | -------- | --------- |
| 남자 컷      | 샴푸 별도 | 10,000원 | 30분      |
| 여자 컷      | 샴푸 별도 | 15,000원 | 60분      |
| 컷트 시 샴푸 | 선택 옵션 | 3,000원  | +10분     |

---

### 7.2 염색 (Color)

| 메뉴         | 설명                  | 가격      | 소요 시간 |
| ------------ | --------------------- | --------- | --------- |
| 뿌리 염색    | 새치/부분 염색        | 30,000원  | 90분      |
| 전체 염색    | 길이/상태에 따라 상이 | 50,000원~ | 120분     |
| 염색 시 컷트 | 추가 옵션             | 10,000원  | +30분     |

---

### 7.3 펌 (Perm)

| 메뉴      | 설명         | 가격      | 소요 시간 |
| --------- | ------------ | --------- | --------- |
| 다운펌    | 볼륨/결 정리 | 20,000원  | 60분      |
| 일반 펌   | 기본 펌      | 50,000원~ | 120분     |
| 매직      | 스트레이트   | 60,000원~ | 150분     |
| 볼륨 매직 | 볼륨 + 매직  | 70,000원~ | 180분     |

---

## 8. 메뉴 + 예약 연계 규칙

### 8.1 예약 기준

- 예약은 **하나의 시술 메뉴 기준**으로 진행한다.
- 추가 옵션(샴푸/컷트 등)은:
  - 소요 시간에 가산
  - 가격에 가산

---

### 8.2 소요 시간 계산 예시

- 여자 컷 + 샴푸
  - 60분 + 10분 → **70분**
  - 예약 슬롯: **90분(3슬롯) 점유**

- 전체 염색 + 컷트
  - 120분 + 30분 → **150분**
  - 예약 슬롯: **150분(5슬롯) 점유**

> 슬롯 계산은 항상 30분 단위로 올림 처리한다.

---

## 9. 비기능 요구사항 (시간표 관련)

- 시간 슬롯 계산 로직은 UI와 분리된 유틸/서비스로 관리한다.
- 동일 날짜/스타일에 대한 예약 가능 시간 데이터는 캐싱 가능해야 한다.
- 시간표 렌더링은 반응형을 고려하여:
  - 모바일: 2~3열
  - 데스크탑: 4~6열 구성 가능

---

## 10. Definition of Done (예약 시간)

- [ ] 시간표는 항상 30분 단위로 표시됨
- [ ] 시술별 소요 시간에 따라 연속 슬롯 점유 계산됨
- [ ] 예약 불가 시작 시간은 클릭 불가
- [ ] 예약 시간 범위(시작~종료)가 사용자에게 명확히 안내됨
- [ ] 빈 날짜/충돌 상황 UX 정의됨
